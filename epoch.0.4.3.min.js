(function(l){var k,d=/[-+,> ]/;l([],k=function(c,f){function a(h){function f(){s&&(w&&s!=w)&&(w==h&&(q||(q=d.test(x)&&c.createDocumentFragment()))||w).insertBefore(s,t||null)}for(var q,p,t,w,s,k=arguments,l=k[0],z=0;z<k.length;z++){var x=k[z];if("object"==typeof x){p=!1;if(x instanceof Array){s=c.createDocumentFragment();for(var y=0;y<x.length;y++)s.appendChild(a(x[y]));x=s}if(x.nodeType)s=x,f(),w=x,t=0;else for(y in x)s[y]=x[y]}else if(p)p=!1,s.appendChild(c.createTextNode(x));else{1>z&&(h=null);
p=!0;if(l=x.replace(e,function(e,d,q,p,l,y){d&&(f(),"-"==d||"+"==d?(w=(t=s||w).parentNode,s=null,"+"==d&&(t=t.nextSibling)):("<"==d?w=s=(s||w).parentNode:(","==d?w=h:s&&(w=s),s=null),t=0),s&&(w=s));if((e=!q&&p)||!s&&(q||l))"$"==e?(e=k[++z],w.appendChild(c.createTextNode(e))):(e=e||a.defaultTag,(d=n&&k[z+1]&&k[z+1].name)&&(e="<"+e+' name="'+d+'">'),s=v&&~(m=e.indexOf("|"))?c.createElementNS(v[e.slice(0,m)],e.slice(m+1)):c.createElement(e));if(q)if("$"==p&&(p=k[++z]),"#"==q)s.id=p;else if(d=(e=s.className)&&
(" "+e+" ").replace(" "+p+" "," "),"."==q)s.className=e?(d+p).substring(1):p;else if("!"==x){var A;n?a("div",s,"<").innerHTML="":(A=s.parentNode)&&A.removeChild(s)}else d=d.substring(1,d.length-1),d!=e&&(s.className=d);l&&("$"==y&&(y=k[++z]),"style"==l?s.style.cssText=y:(q="!"==l.charAt(0)?(l=l.substring(1))&&"removeAttribute":"setAttribute",y=""===y?l:y,v&&~(m=l.indexOf("|"))?s[q+"NS"](v[l.slice(0,m)],l.slice(m+1),y):s[q](l,y)));return""}))throw new SyntaxError("Unexpected char "+l+" in "+x);f();
w=l=s||w}}h&&q&&h.appendChild(q);return l}d=f||d;var e=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,m,v=!1;c=c||document;var n="object"==typeof c.createElement;a.addNamespace=function(a,e){c.createElementNS?(v||(v={}))[a]=e:c.namespaces.add(a,e)};a.defaultTag="div";a.forDocument=k;return a})})(function(l,k,d){d=d||k;"function"===typeof define?define([],function(){return d()}):"undefined"==typeof window?require("./node-html")(module,d):put=d()});
(function(){var l,k,d,c={}.hasOwnProperty,f=function(a,e){function m(){this.constructor=a}for(var v in e)c.call(e,v)&&(a[v]=e[v]);m.prototype=e.prototype;a.prototype=new m;a.__super__=e.prototype;return a};null==window.Epoch&&(window.Epoch={});null==(d=window.Epoch).Chart&&(d.Chart={});null==(d=window.Epoch).Time&&(d.Time={});null==(d=window.Epoch).Util&&(d.Util={});null==(d=window.Epoch).Formats&&(d.Formats={});Epoch.isArray=function(a){return"array"===$.type(a)};Epoch.isObject=function(a){return"object"===
$.type(a)};Epoch.isString=function(a){return"string"===$.type(a)};Epoch.isFunction=function(a){return"function"===$.type(a)};Epoch.warn=function(a){return(console.warn||console.log)("Epoch Warning: "+a)};Epoch.exception=function(a){throw"Epoch Error: "+a;};Epoch.Util.copy=function(a){var e,m,c;if(null==a)return null;e={};for(m in a)c=a[m],e[m]=c;return e};Epoch.Util.defaults=function(a,e){var m,c;c=Epoch.Util.copy(a);for(m in e)null!=a[m]&&null!=e[m]?!Epoch.isArray(a[m])&&Epoch.isObject(a[m])&&Epoch.isObject(e[m])?
c[m]=Epoch.Util.defaults(a[m],e[m]):c[m]=a[m]:c[m]=null!=a[m]?a[m]:e[m];return c};Epoch.Util.formatSI=function(a,e,m){var c,n,f,d;null==e&&(e=1);null==m&&(m=!1);if(1E3>a){if((a|0)!==a||m)a=a.toFixed(e);return a}d="KMGTPEZY".split("");for(n in d)if(f=d[n],c=Math.pow(10,3*((n|0)+1)),a>=c&&a<Math.pow(10,3*((n|0)+2))){a/=c;if((a|0)!==a||m)a=a.toFixed(e);return""+a+" "+f}};Epoch.Util.formatBytes=function(a,e,m){var c,n,f,d;null==e&&(e=1);null==m&&(m=!1);if(1024>a)return""+a+" B";d="KB MB GB TB PB EB ZB YB".split(" ");
for(n in d)if(f=d[n],c=Math.pow(1024,(n|0)+1),a>=c&&a<Math.pow(1024,(n|0)+2)){a/=c;if((a|0)!==a||m)a=a.toFixed(e);return""+a+" "+f}};Epoch.Util.dasherize=function(a){return a.replace("\n","").replace(/\s+/,"-").toLowerCase()};Epoch.Util.domain=function(a,e){var m,c,n,f,d,q,p,t;null==e&&(e="x");n={};f=0;for(q=a.length;f<q;f++)for(m=a[f],t=m.values,d=0,p=t.length;d<p;d++)m=t[d],n[m[e]]=!0;f=[];for(c in n)f.push(c);return f};Epoch.toRGBA=function(a,e){var m,c;if(a.match(/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)/))m=
"rgba("+r+","+g+","+b+","+e+")";else if(c=d3.rgb(a))m="rgba("+c.r+","+c.g+","+c.b+","+e+")";return m};Epoch.Formats.regular=function(a){return a};Epoch.Formats.si=function(a){return Epoch.Util.formatSI(a)};Epoch.Formats.percent=function(a){return(100*a).toFixed(1)+"%"};Epoch.Formats.seconds=function(a){return k(new Date(1E3*a))};k=d3.time.format("%I:%M:%S %p");Epoch.Formats.bytes=function(a){return Epoch.Util.formatBytes(a)};Epoch.Events=function(){function a(){this._events={}}a.prototype.on=function(a,
m){var c;if(null!=m)return null==(c=this._events)[a]&&(c[a]=[]),this._events[a].push(m)};a.prototype.off=function(a,m){var c,f;if(Epoch.isObject(this._events[a])){if(null==m)return delete this._events[a];for(f=[];0<=(c=this._events[a].indexOf(m));)f.push(this._events[a].splice(c,1));return f}};a.prototype.trigger=function(a){var m,c,f,d,u,q,p,t;if(null!=this._events[a]){m=function(){var a,e,c;c=[];d=a=1;for(e=arguments.length;1<=e?a<e:a>e;d=1<=e?++a:--a)c.push(arguments[d]);return c}.apply(this,arguments);
p=this._events[a];t=[];u=0;for(q=p.length;u<q;u++)c=p[u],f=null,Epoch.isString(c)?f=this[c]:Epoch.isFunction(c)&&(f=c),null==f&&Epoch.exception("Callback for event '"+a+"' is not a function or reference to a method."),t.push(f.apply(this,m));return t}};return a}();Epoch.Chart.Base=function(a){function e(a){this.options=a;e.__super__.constructor.call(this);this.setData(this.options.data||[]);null!=this.options.el&&(this.el=$(this.options.el));this.width=this.options.width;this.height=this.options.height;
null!=this.el?(null==this.width&&(this.width=$(this.el).width()),null==this.height&&(this.height=$(this.el).height())):(null==this.width&&(this.width=c.dimensions.width),null==this.height&&(this.height=c.dimensions.height))}var c;f(e,a);c={width:320,height:240};e.prototype.isVisible=function(){return null==this.el?!1:this.el.is(":visible")};e.prototype.setData=function(a){var e,c,m,f,d;e=1;f=0;for(d=a.length;f<d;f++)m=a[f],c=["layer"],c.push("category"+e),null!=m.label&&c.push(Epoch.Util.dasherize(m.label)),
m.className=c.join(" "),e++;return this.data=a};e.prototype.update=function(a,e){null==e&&(e=!0);this.setData(a);if(e)return this.draw()};e.prototype.draw=function(){};e.prototype.extent=function(a){return[d3.min(this.data,function(e){return d3.min(e.values,a)}),d3.max(this.data,function(e){return d3.max(e.values,a)})]};return e}(Epoch.Events);Epoch.Chart.SVG=function(a){function e(a){this.options=null!=a?a:{};e.__super__.constructor.call(this,this.options);this.svg=null!=this.el?d3.select(this.el.get(0)).append("svg"):
d3.select(document.createElement("svg"));this.svg.attr({xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height})}f(e,a);return e}(Epoch.Chart.Base);Epoch.Chart.Canvas=function(a){function e(a){this.options=null!=a?a:{};e.__super__.constructor.call(this,this.options);this.canvas=$("<canvas></canvas>");this.pixelRatio=null!=this.options.pixelRatio?this.options.pixelRatio:null!=window.devicePixelRatio?window.devicePixelRatio:1;this.canvas.css({width:""+this.width+"px",height:""+this.height+
"px"});this.canvas.attr("width",this.width*this.pixelRatio).attr("height",this.height*this.pixelRatio);null!=this.el&&this.el.append(this.canvas);this.ctx=this.canvas.get(0).getContext("2d")}f(e,a);e.prototype.getWidth=function(){return this.width*this.pixelRatio};e.prototype.getHeight=function(){return this.height*this.pixelRatio};e.prototype.clear=function(){return this.ctx.clearRect(0,0,this.getWidth(),this.getHeight())};e.prototype.getStyles=function(a){return l.getStyles(a,this.el)};return e}(Epoch.Chart.Base);
l=function(){function a(){}a.cache={};a.styleList=["fill","stroke","stroke-width"];a.container=null;a.purge=function(){return a.cache={}};a.load=function(){$("body").append('<div id="_canvas_css_reference"></div>');return a.container=$("#_canvas_css_reference","body")};a.containerId=function(a){var c,f;c=a.attr("id");null!=(f=a.attr("class"))&&(f=f.split(/\s+/).join("."));return null!=c&&null!=f?"#"+c+"."+f:null!=c?"#"+c:null!=f?"."+f:""};a.getStyles=function(e,c){var f,d,h,u,q,p,t,l;d=""+a.containerId(c)+
"__"+e;f=a.cache[d];if(null!=f)return f;f=$(c).clone().html("<svg></svg>");f.removeAttr("style");a.container.append(f);t=$("svg",f);u=e.split(/\s+/);for(q=p=put(u.shift());u.length;)h=put(u.shift()),q.appendChild(h),q=h;t.html(p);u=$(e,t);q={};l=a.styleList;p=0;for(t=l.length;p<t;p++)h=l[p],q[h]=u.css(h);a.cache[d]=q;$(f,a.container).remove();return q};return a}();$(l.load);Epoch.QueryCSS=l}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Chart.Plot=function(d){function c(a){var e,m,v,d;this.options=null!=a?a:{};a=Epoch.Util.copy(this.options.margins)||{};c.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,f));this.margins={};d=["top","right","bottom","left"];m=0;for(v=d.length;m<v;m++)e=d[m],this.margins[e]=
this.options.margins[e],null!=a[e]||this.hasAxis(e)||(this.margins[e]=6);this.svg=this.svg.append("g").attr("transform","translate("+this.margins.left+", "+this.margins.top+")")}var f;k(c,d);f={margins:{top:25,right:50,bottom:25,left:50},axes:["left","bottom"],ticks:{top:14,bottom:14,left:5,right:5},tickFormats:{top:Epoch.Formats.regular,bottom:Epoch.Formats.regular,left:Epoch.Formats.si,right:Epoch.Formats.si}};c.prototype.setTickFormat=function(a,e){return this.options.tickFormats[a]=e};c.prototype.hasAxis=
function(a){return-1<this.options.axes.indexOf(a)};c.prototype.innerWidth=function(){return this.width-(this.margins.left+this.margins.right)};c.prototype.innerHeight=function(){return this.height-(this.margins.top+this.margins.bottom)};c.prototype.x=function(){return d3.scale.linear().domain(this.extent(function(a){return a.x})).range([0,this.innerWidth()])};c.prototype.y=function(){return d3.scale.linear().domain(this.extent(function(a){return a.y})).range([this.innerHeight(),0])};c.prototype.bottomAxis=
function(){return d3.svg.axis().scale(this.x()).orient("bottom").ticks(this.options.ticks.bottom).tickFormat(this.options.tickFormats.bottom)};c.prototype.topAxis=function(){return d3.svg.axis().scale(this.x()).orient("top").ticks(this.options.ticks.top).tickFormat(this.options.tickFormats.top)};c.prototype.leftAxis=function(){return d3.svg.axis().scale(this.y()).orient("left").ticks(this.options.ticks.left).tickFormat(this.options.tickFormats.left)};c.prototype.rightAxis=function(){return d3.svg.axis().scale(this.y()).orient("right").ticks(this.options.ticks.right).tickFormat(this.options.tickFormats.right)};
c.prototype.draw=function(){c.__super__.draw.call(this);return this._axesDrawn?this._redrawAxes():this._drawAxes()};c.prototype._redrawAxes=function(){this.hasAxis("bottom")&&this.svg.selectAll(".x.axis.bottom").transition().duration(500).ease("linear").call(this.bottomAxis());this.hasAxis("top")&&this.svg.selectAll(".x.axis.top").transition().duration(500).ease("linear").call(this.topAxis());this.hasAxis("left")&&this.svg.selectAll(".y.axis.left").transition().duration(500).ease("linear").call(this.leftAxis());
if(this.hasAxis("right"))return this.svg.selectAll(".y.axis.right").transition().duration(500).ease("linear").call(this.rightAxis())};c.prototype._drawAxes=function(){this.hasAxis("bottom")&&this.svg.append("g").attr("class","x axis bottom").attr("transform","translate(0, "+this.innerHeight()+")").call(this.bottomAxis());this.hasAxis("top")&&this.svg.append("g").attr("class","x axis top").call(this.topAxis());this.hasAxis("left")&&this.svg.append("g").attr("class","y axis left").call(this.leftAxis());
this.hasAxis("right")&&this.svg.append("g").attr("class","y axis right").attr("transform","translate("+this.innerWidth()+", 0)").call(this.rightAxis());return this._axesDrawn=!0};return c}(Epoch.Chart.SVG)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Chart.Area=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}k(c,d);c.prototype.y=function(){var c,a,e,m,d,n,h;c=[];n=this.data;m=0;for(d=n.length;m<d;m++)for(a in e=n[m],h=e.values,h)e=h[a],null!=c[a]&&(c[a]+=e.y),null==c[a]&&(c[a]=e.y);return d3.scale.linear().domain([0,
d3.max(c)]).range([this.height-this.margins.top-this.margins.bottom,0])};c.prototype.draw=function(){var f,a,e,m;a=[this.x(),this.y()];e=a[0];m=a[1];f=d3.svg.area().x(function(a){return e(a.x)}).y0(function(a){return m(a.y0)}).y1(function(a){return m(a.y0+a.y)});d3.layout.stack().values(function(a){return a.values})(this.data);this.svg.selectAll(".layer").remove();a=this.svg.selectAll(".layer").data(this.data,function(a){return a.label});a.select(".area").attr("d",function(a){return f(a.values)});
a.enter().append("g").attr("class",function(a){return a.className});a.append("path").attr("class","area").attr("d",function(a){return f(a.values)});return c.__super__.draw.call(this)};return c}(Epoch.Chart.Plot)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Chart.Bar=function(d){function c(a){this.options=null!=a?a:{};c.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,f))}var f;k(c,d);f={style:"grouped"};c.prototype.x=function(){return d3.scale.ordinal().domain(Epoch.Util.domain(this.data)).rangeRoundBands([0,this.innerWidth()],
0.1)};c.prototype.x1=function(a){var e;return d3.scale.ordinal().domain(function(){var a,c,f,d;f=this.data;d=[];a=0;for(c=f.length;a<c;a++)e=f[a],d.push(e.label);return d}.call(this)).rangeRoundBands([0,a.rangeBand()],0.08)};c.prototype.y=function(){var a;a=this.extent(function(a){return a.y});a[0]=Math.min(0,a[0]);return d3.scale.linear().domain(a).range([this.height-this.margins.top-this.margins.bottom,0])};c.prototype._remapData=function(){var a,e,c,f,d,h,u,q,p,t,l,s;d={};l=this.data;h=0;for(q=
l.length;h<q;h++)for(f=l[h],a="bar "+f.className.replace(/\s*layer\s*/,""),s=f.values,u=0,p=s.length;u<p;u++)e=s[u],null==d[t=e.x]&&(d[t]=[]),d[e.x].push({label:f.label,y:e.y,className:a});e=[];for(c in d)a=d[c],e.push({group:c,values:a});return e};c.prototype.draw=function(){var a,e,m,f,d,h;a=[this.x(),this.y()];f=a[0];h=a[1];d=this.x1(f);e=this.height-this.margins.top-this.margins.bottom;a=this._remapData();a=this.svg.selectAll(".layer").data(a,function(a){return a.group});a.transition().duration(750).attr("transform",
function(a){return"translate("+f(a.group)+", 0)"});a.enter().append("g").attr("class","layer").attr("transform",function(a){return"translate("+f(a.group)+", 0)"});m=a.selectAll("rect").data(function(a){return a.values});m.transition().duration(600).attr("x",function(a){return d(a.label)}).attr("y",function(a){return h(a.y)}).attr("width",d.rangeBand()).attr("height",function(a){return e-h(a.y)});m.enter().append("rect").attr("class",function(a){return a.className}).attr("x",function(a){return d(a.label)}).attr("y",
function(a){return h(a.y)}).attr("width",d.rangeBand()).attr("height",function(a){return e-h(a.y)});m.exit().transition().duration(150).style("opacity","0").remove();a.exit().transition().duration(750).style("opacity","0").remove();return c.__super__.draw.call(this)};return c}(Epoch.Chart.Plot)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Chart.LabeledBar=function(d){function c(f){this.options=null!=f?f:{};null==(f=this.options).margins&&(f.margins={});null==(f=this.options.margins).top&&(f.top=25);c.__super__.constructor.call(this,this.options)}k(c,d);c.prototype.draw=function(){var f,a,e,m,d,n;c.__super__.draw.call(this);e=[this.x(),
this.y()];m=e[0];n=e[1];d=this.x1(m);f=this._remapData();e=null!=(a=this.options.label)?a:function(a){return a.y};a=this.svg.selectAll(".label").data(f,function(a){return a.group});a.transition().duration(750).attr("transform",function(a){return"translate("+m(a.group)+", 0)"});a.enter().append("g").attr("class","label").attr("transform",function(a){return"translate("+m(a.group)+", 0)"});f=a.selectAll("text").data(function(a){return a.values});f.transition().duration(600).attr("x",function(a){return d(a.label)+
d.rangeBand()/2}).attr("y",function(a){return n(a.y)}).text(e);f.enter().append("text").attr("text-anchor","middle").attr("x",function(a){return d(a.label)+d.rangeBand()/2}).attr("y",function(a){return n(a.y)}).attr("dy","-.35em").text(e);f.exit().transition().duration(150).style("opacity","0").remove();e=a.selectAll("text.group").data(function(a){return a.values});e.transition().duration(600).attr("x",function(a){return d(a.label)+d.rangeBand()/2}).attr("y",function(a){return n(a.y)}).text(function(a){return a.label[0]});
e.enter().append("text").attr("class","group").attr("text-anchor","middle").attr("x",function(a){return d(a.label)+d.rangeBand()/2}).attr("y",function(a){return n(a.y)}).attr("dy","1em").text(function(a){return a.label[0]});e.exit().transition().duration(150).style("opacity","0").remove();return a.exit().transition().duration(750).style("opacity","0").remove()};return c}(Epoch.Chart.Bar)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Chart.Line=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}k(c,d);c.prototype.line=function(){var c,a,e;e=[this.x(),this.y()];c=e[0];a=e[1];return d3.svg.line().x(function(a){return function(a){return c(a.x)}}(this)).y(function(e){return function(e){return a(e.y)}}(this))};
c.prototype.draw=function(){var f,a;a=[this.x(),this.y(),this.line()][2];f=this.svg.selectAll(".layer").data(this.data,function(a){return a.label});f.select(".line").transition().duration(500).attr("d",function(e){return a(e.values)});f.enter().append("g").attr("class",function(a){return a.className}).append("path").attr("class","line").attr("d",function(e){return a(e.values)});f.exit().transition().duration(750).style("opacity","0").remove();return c.__super__.draw.call(this)};return c}(Epoch.Chart.Plot)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Chart.Pie=function(d){function c(a){this.options=null!=a?a:{};c.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,f));a=Math.max(this.width,this.height)/2;this.pie=d3.layout.pie().sort(null).value(function(a){return a.value});this.arc=d3.svg.arc().outerRadius(a-this.options.margin).innerRadius(this.options.inner);
this.svg=this.svg.append("g").attr("transform","translate("+this.width/2+", "+this.height/2+")")}var f;k(c,d);f={margin:10,inner:0};c.prototype.draw=function(){var a;a=this.svg.selectAll(".arc").data(this.pie(this.data),function(a){return a.data.label});a.enter().append("g").attr("class",function(a){return"arc pie "+a.data.className});a.select("path").attr("d",this.arc);a.select("text").attr("transform",function(a){return function(c){return"translate("+a.arc.centroid(c)+")"}}(this)).text(function(a){return a.data.label});
a.append("path").attr("d",this.arc).each(function(a){return this._current=a});a.append("text").attr("transform",function(a){return function(c){return"translate("+a.arc.centroid(c)+")"}}(this)).attr("dy",".35em").style("text-anchor","middle").text(function(a){return a.data.label});return a.exit().remove()};return c}(Epoch.Chart.SVG)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Chart.Scatter=function(d){function c(a){this.options=null!=a?a:{};c.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,f))}var f;k(c,d);f={radius:3.5,axes:["top","bottom","left","right"]};c.prototype.draw=function(){var a,e,m,f;c.__super__.draw.call(this);a=[this.x(),
this.y()];m=a[0];f=a[1];e=this.svg.selectAll(".layer").data(this.data,function(a){return a.label});e.enter().append("g").attr("class",function(a){return a.className});a=e.selectAll(".dot").data(function(a){return a.values});a.transition().duration(500).attr("cx",function(a){return m(a.x)}).attr("cy",function(a){return f(a.y)});a.enter().append("circle").attr("class","dot").attr("r",this.options.radius).attr("cx",function(a){return m(a.x)}).attr("cy",function(a){return f(a.y)});a.exit().transition().duration(750).style("opacity",
0).remove();return e.exit().transition().duration(750).style("opacity",0).remove()};return c}(Epoch.Chart.Plot)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Time.Plot=function(d){function c(a){var e,m,d,n;this.options=a;a=Epoch.Util.copy(this.options.margins)||{};c.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,f));this._queueSize=this.options.queueSize;this._queue=[];this.margins={};n=["top","right","bottom","left"];
m=0;for(d=n.length;m<d;m++)e=n[m],this.margins[e]=this.options.margins[e],null!=a[e]||this.hasAxis(e)||(this.margins[e]=6);this.svg=d3.select(this.el.get(0)).insert("svg",":first-child").attr("width",this.width).attr("height",this.height).style("z-index","1000");"absolute"!==this.el.css("position")&&"relative"!==this.el.css("position")&&this.el.css("position","relative");this.canvas.attr("width",this.innerWidth());this.canvas.attr("height",this.innerHeight());this.canvas.css({position:"absolute",
width:""+this.innerWidth()/this.pixelRatio+"px",height:""+this.innerHeight()/this.pixelRatio+"px",top:""+this.margins.top+"px",left:""+this.margins.left+"px","z-index":"999"});this.animation={interval:null,active:!1,delta:-(this.w()/this.options.fps),tickDelta:-(this.w()/this.pixelRatio/this.options.fps),frame:0,duration:this.options.fps};this._prepareTimeAxes();this._prepareRangeAxes();this.animationCallback=function(a){return function(){return a._animate()}}(this)}var f;k(c,d);f={fps:24,historySize:120,
windowSize:40,queueSize:10,margins:{top:25,right:50,bottom:25,left:50},axes:["bottom"],ticks:{time:15,left:5,right:5},tickFormats:{top:Epoch.Formats.seconds,bottom:Epoch.Formats.seconds,left:Epoch.Formats.si,right:Epoch.Formats.si}};c.prototype.setData=function(a){var e,c,f,d,h;this.data=[];h=[];for(f in a)d=a[f],c=Epoch.Util.copy(d),e=Math.max(0,d.values.length-this.options.historySize),c.values=d.values.slice(e),e=["layer"],e.push("category"+((f|0)+1)),null!=d.label&&e.push(Epoch.Util.dasherize(d.label)),
c.className=e.join(" "),h.push(this.data.push(c));return h};c.prototype._offsetX=function(){return 0};c.prototype._prepareTimeAxes=function(){var a,e,c,f,d;this.hasAxis("bottom")&&(a=this.bottomAxis=this.svg.append("g").attr("class","x axis bottom canvas").attr("transform","translate("+(this.margins.left-1)+", "+(this.innerHeight()/this.pixelRatio+this.margins.top)+")"),a.append("path").attr("class","domain").attr("d","M0,0H"+(this.innerWidth()/this.pixelRatio+1)));this.hasAxis("top")&&(a=this.topAxis=
this.svg.append("g").attr("class","x axis top canvas").attr("transform","translate("+(this.margins.left-1)+", "+this.margins.top+")"),a.append("path").attr("class","domain").attr("d","M0,0H"+(this.innerWidth()/this.pixelRatio+1)));f=this.options.ticks.time;this._ticks=[];this._tickTimer=f;d=this.data;e=0;for(c=d.length;e<c;e++)if(a=d[e],null!=a.values&&0<a.values.length){c=[this.options.windowSize-1,a.values.length-1];e=c[0];for(c=c[1];0<=e&&0<=c;)this._pushTick(e,a.values[c].time,!1,!0),e-=f,c-=
f;break}return[]};c.prototype._prepareRangeAxes=function(){this.hasAxis("left")&&this.svg.append("g").attr("class","y axis left").attr("transform","translate("+(this.margins.left-1)+", "+this.margins.top+")").call(this.leftAxis());if(this.hasAxis("right"))return this.svg.append("g").attr("class","y axis right").attr("transform","translate("+(this.width-this.margins.right)+", "+this.margins.top+")").call(this.rightAxis())};c.prototype.leftAxis=function(){var a,e;e=this.options.ticks.left;a=d3.svg.axis().scale(this.ySvg()).orient("left").tickFormat(this.options.tickFormats.left);
return 2===e?a.tickValues(this.extent(function(a){return a.y})):a.ticks(e)};c.prototype.rightAxis=function(){var a,e;this.extent(function(a){return a.y});e=this.options.ticks.right;a=d3.svg.axis().scale(this.ySvg()).orient("right").tickFormat(this.options.tickFormats.left);return 2===e?a.tickValues(this.extent(function(a){return a.y})):a.ticks(e)};c.prototype.hasAxis=function(a){return-1<this.options.axes.indexOf(a)};c.prototype.innerWidth=function(){return(this.width-(this.margins.left+this.margins.right))*
this.pixelRatio};c.prototype.innerHeight=function(){return(this.height-(this.margins.top+this.margins.bottom))*this.pixelRatio};c.prototype._prepareEntry=function(a){return a};c.prototype._prepareLayers=function(a){return a};c.prototype._startTransition=function(){if(!0!==this.animation.active&&0!==this._queue.length)return this.trigger("transition:start"),this._shift(),this.animation.active=!0,this.animation.interval=setInterval(this.animationCallback,1E3/this.options.fps)};c.prototype._stopTransition=
function(){var a,e,c,f;if(this.inTransition()){f=this.data;e=0;for(c=f.length;e<c;e++)a=f[e],a.values.length>this.options.windowSize+1&&a.values.shift();e=[this._ticks[0],this._ticks[this._ticks.length-1]];a=e[0];e=e[1];null!=e&&e.enter&&(e.enter=!1,e.opacity=1);null!=a&&a.exit&&this._shiftTick();this.animation.frame=0;this.trigger("transition:end");if(0<this._queue.length)return this._shift();this.animation.active=!1;return clearInterval(this.animation.interval)}};c.prototype.inTransition=function(){return this.animation.active};
c.prototype.push=function(a){a=this._prepareLayers(a);this._queue.length>this._queueSize&&this._queue.splice(this._queueSize,this._queue.length-this._queueSize);if(this._queue.length===this._queueSize)return!1;this._queue.push(a.map(function(a){return function(c){return a._prepareEntry(c)}}(this)));this.trigger("push");if(!this.inTransition())return this._startTransition()};c.prototype._shift=function(){var a,e,c,f;this.trigger("before:shift");a=this._queue.shift();f=this.data;for(e in f)c=f[e],c.values.push(a[e]);
this._updateTicks(a[0].time);this.hasAxis("left")&&this.svg.selectAll(".y.axis.left").transition().duration(500).ease("linear").call(this.leftAxis());this.hasAxis("right")&&this.svg.selectAll(".y.axis.right").transition().duration(500).ease("linear").call(this.rightAxis());return this.trigger("after:shift")};c.prototype._animate=function(){if(this.inTransition())return++this.animation.frame===this.animation.duration&&this._stopTransition(),this.draw(this.animation.frame*this.animation.delta),this._updateTimeAxes()};
c.prototype.y=function(){return d3.scale.linear().domain(this.extent(function(a){return a.y})).range([this.innerHeight(),0])};c.prototype.ySvg=function(){return d3.scale.linear().domain(this.extent(function(a){return a.y})).range([this.innerHeight()/this.pixelRatio,0])};c.prototype.w=function(){return this.innerWidth()/this.options.windowSize};c.prototype._updateTicks=function(a){if(this.hasAxis("top")||this.hasAxis("bottom"))if(++this._tickTimer%this.options.ticks.time||this._pushTick(this.options.windowSize,
a,!0),!(0<=this._ticks[0].x-this.w()/this.pixelRatio))return this._ticks[0].exit=!0};c.prototype._pushTick=function(a,e,c,f){null==c&&(c=!1);null==f&&(f=!1);if(this.hasAxis("top")||this.hasAxis("bottom"))return e={time:e,x:a*(this.w()/this.pixelRatio)+this._offsetX(),opacity:c?0:1,enter:c?!0:!1,exit:!1},this.hasAxis("bottom")&&(a=this.bottomAxis.append("g").attr("class","tick major").attr("transform","translate("+(e.x+1)+",0)").style("opacity",e.opacity),a.append("line").attr("y2",6),a.append("text").attr("text-anchor",
"middle").attr("dy",19).text(this.options.tickFormats.bottom(e.time)),e.bottomEl=$(a[0])),this.hasAxis("top")&&(a=this.topAxis.append("g").attr("class","tick major").attr("transform","translate("+(e.x+1)+",0)").style("opacity",e.opacity),a.append("line").attr("y2",-6),a.append("text").attr("text-anchor","middle").attr("dy",-10).text(this.options.tickFormats.top(e.time)),e.topEl=$(a[0])),f?this._ticks.unshift(e):this._ticks.push(e),e};c.prototype._shiftTick=function(){var a;if(0<this._ticks.length&&
(a=this._ticks.shift(),null!=a.topEl&&a.topEl.remove(),null!=a.bottomEl))return a.bottomEl.remove()};c.prototype._updateTimeAxes=function(){var a,c,f,d,n,h,u;if(this.hasAxis("top")||this.hasAxis("bottom")){a=[this.animation.tickDelta,1/this.options.fps];c=a[0];a=a[1];h=this._ticks;u=[];d=0;for(n=h.length;d<n;d++)f=h[d],f.x+=c,this.hasAxis("bottom")&&f.bottomEl.attr("transform","translate("+(f.x+1)+",0)"),this.hasAxis("top")&&f.topEl.attr("transform","translate("+(f.x+1)+",0)"),f.enter?f.opacity+=
a:f.exit&&(f.opacity-=a),f.enter||f.exit?(this.hasAxis("bottom")&&f.bottomEl.css("opacity",f.opacity),this.hasAxis("top")?u.push(f.topEl.css("opacity",f.opacity)):u.push(void 0)):u.push(void 0);return u}};c.prototype.draw=function(a){};return c}(Epoch.Chart.Canvas);Epoch.Time.Stack=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}k(c,d);c.prototype._prepareLayers=function(c){var a,e,d,v;d=e=0;for(v=c.length;d<v;d++)a=c[d],a.y0=e,e+=a.y;return c};c.prototype.setData=function(f){var a,
e,d,v,n;c.__super__.setData.call(this,f);n=[];a=f=0;for(v=this.data[0].values.length;0<=v?f<v:f>v;a=0<=v?++f:--f)d=0,n.push(function(){var c,f,n,v;n=this.data;v=[];c=0;for(f=n.length;c<f;c++)e=n[c],e.values[a].y0=d,v.push(d+=e.values[a].y);return v}.call(this));return n};c.prototype.extent=function(){var c,a,e,d,v,n,h,u;c=v=e=0;for(h=this.data[0].values.length;0<=h?v<h:v>h;c=0<=h?++v:--v){a=n=d=0;for(u=this.data.length;0<=u?n<u:n>u;a=0<=u?++n:--n)d+=this.data[a].values[c].y;d>e&&(e=d)}return[0,e]};
return c}(Epoch.Time.Plot)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Time.Area=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}k(c,d);c.prototype.setStyles=function(c){c=null!=c.className?this.getStyles("g."+c.className.replace(/\s/g,".")+" path.area"):this.getStyles("g path.area");this.ctx.fillStyle=c.fill;null!=c.stroke&&(this.ctx.strokeStyle=
c.stroke);if(null!=c["stroke-width"])return this.ctx.lineWidth=c["stroke-width"].replace("px","")};c.prototype._drawAreas=function(c){var a,e,d,v,n,h,u,q,p,t;null==c&&(c=0);h=[this.y(),this.w()];u=h[0];h=h[1];t=[];for(e=q=p=this.data.length-1;0>=p?0>=q:0<=q;e=0>=p?++q:--q){v=this.data[e];this.setStyles(v);this.ctx.beginPath();n=[this.options.windowSize,v.values.length,this.inTransition()];e=n[0];d=n[1];for(n=n[2];-2<=--e&&0<=--d;)a=v.values[d],a=[(e+1)*h+c,u(a.y+a.y0)],n&&(a[0]+=h),e===this.options.windowSize-
1?this.ctx.moveTo.apply(this.ctx,a):this.ctx.lineTo.apply(this.ctx,a);e=n?(e+3)*h+c:(e+2)*h+c;this.ctx.lineTo(e,this.innerHeight());this.ctx.lineTo(this.width*this.pixelRatio+h+c,this.innerHeight());this.ctx.closePath();t.push(this.ctx.fill())}return t};c.prototype._drawStrokes=function(c){var a,e,d,v,n,h,u,q,p,t;null==c&&(c=0);e=[this.y(),this.w()];u=e[0];h=e[1];t=[];for(e=q=p=this.data.length-1;0>=p?0>=q:0<=q;e=0>=p?++q:--q){v=this.data[e];this.setStyles(v);this.ctx.beginPath();n=[this.options.windowSize,
v.values.length,this.inTransition()];e=n[0];d=n[1];for(n=n[2];-2<=--e&&0<=--d;)a=v.values[d],a=[(e+1)*h+c,u(a.y+a.y0)],n&&(a[0]+=h),e===this.options.windowSize-1?this.ctx.moveTo.apply(this.ctx,a):this.ctx.lineTo.apply(this.ctx,a);t.push(this.ctx.stroke())}return t};c.prototype.draw=function(c){null==c&&(c=0);if(this.isVisible())return this.clear(),this._drawAreas(c),this._drawStrokes(c)};return c}(Epoch.Time.Stack)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Time.Bar=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}k(c,d);c.prototype._offsetX=function(){return 0.5*this.w()/this.pixelRatio};c.prototype.setStyles=function(c){c=this.getStyles("rect.bar."+c.replace(/\s/g,"."));this.ctx.fillStyle=c.fill;this.ctx.strokeStyle=
null==c.stroke||"none"===c.stroke?"transparent":c.stroke;if(null!=c["stroke-width"])return this.ctx.lineWidth=c["stroke-width"].replace("px","")};c.prototype.draw=function(c){var a,e,d,v,n,h,u,q,p,t,l,s,k,A,z,x,y;null==c&&(c=0);if(this.isVisible()){this.clear();k=[this.y(),this.w()];s=k[0];l=k[1];z=this.data;y=[];k=0;for(A=z.length;k<A;k++)p=z[k],0<p.values.length&&(this.setStyles(p.className),x=[this.options.windowSize,p.values.length,this.inTransition()],h=x[0],q=x[1],u=(t=x[2])?-1:0,y.push(function(){var k,
x;for(x=[];--h>=u&&0<=--q;)e=p.values[q],k=[h*l+c,e.y,e.y0],d=k[0],v=k[1],n=k[2],t&&(d+=l),a=[d+1,s(v+n),l-2,this.innerHeight()-s(v)+0.5*this.pixelRatio],this.ctx.fillRect.apply(this.ctx,a),x.push(this.ctx.strokeRect.apply(this.ctx,a));return x}.call(this)));return y}};return c}(Epoch.Time.Stack)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Time.Gauge=function(d){function c(a){this.options=null!=a?a:{};c.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,f));this.value=this.options.value||0;"absolute"!==this.el.css("position")&&"relative"!==this.el.css("position")&&this.el.css("position","relative");this.svg=
d3.select(this.el.get(0)).insert("svg",":first-child").attr("width",this.width).attr("height",this.height).attr("class","gauge-labels");$(this.svg[0]).css({position:"absolute","z-index":"1"});this.svg.append("g").attr("transform","translate("+this.textX()+", "+this.textY()+")").append("text").attr("class","value").text(this.options.format(this.value));this.animation={interval:null,active:!1,delta:0,target:0};this._animate=function(a){return function(){Math.abs(a.animation.target-a.value)<Math.abs(a.animation.delta)?
(a.value=a.animation.target,clearInterval(a.animation.interval),a.animation.active=!1):a.value+=a.animation.delta;a.svg.select("text.value").text(a.options.format(a.value));return a.draw()}}(this)}var f;k(c,d);f={domain:[0,1],ticks:10,tickSize:5,tickOffset:5,fps:34,format:Epoch.Formats.percent};c.prototype.update=function(a){this.animation.target=a;this.animation.delta=(a-this.value)/this.options.fps;if(!this.animation.active)return this.animation.interval=setInterval(this._animate,1E3/this.options.fps),
this.animation.active=!0};c.prototype.push=function(a){return this.update(a)};c.prototype.radius=function(){return this.getHeight()/1.58};c.prototype.centerX=function(){return this.getWidth()/2};c.prototype.centerY=function(){return 0.68*this.getHeight()};c.prototype.textX=function(){return this.width/2};c.prototype.textY=function(){return 0.48*this.height};c.prototype.getAngle=function(a){var c,d;d=this.options.domain;c=d[0];return(a-c)/(d[1]-c)*(Math.PI+2*Math.PI/8)-Math.PI/2-Math.PI/8};c.prototype.setStyles=
function(a){a=this.getStyles(a);this.ctx.fillStyle=a.fill;this.ctx.strokeStyle=a.stroke;if(null!=a["stroke-width"])return this.ctx.lineWidth=a["stroke-width"].replace("px","")};c.prototype.draw=function(){var a,c,d,f,n,h,u,q,p,l,k,s;if(this.isVisible()){n=[this.centerX(),this.centerY(),this.radius()];d=n[0];f=n[1];n=n[2];u=[this.options.tickOffset,this.options.tickSize];q=u[0];p=u[1];this.clear();u=d3.scale.linear().domain([0,this.options.ticks]).range([-1.125*Math.PI,Math.PI/8]);this.setStyles(".epoch .gauge .tick");
this.ctx.beginPath();a=k=0;for(s=this.options.ticks;0<=s?k<=s:k>=s;a=0<=s?++k:--k)a=u(a),a=[Math.cos(a),Math.sin(a)],c=a[0],h=a[1],a=c*(n-q)+d,l=h*(n-q)+f,c=c*(n-q-p)+d,h=h*(n-q-p)+f,this.ctx.moveTo(a,l),this.ctx.lineTo(c,h);this.ctx.stroke();this.setStyles(".epoch .gauge .arc.outer");this.ctx.beginPath();this.ctx.arc(d,f,n,-1.125*Math.PI,0.125*Math.PI,!1);this.ctx.stroke();this.setStyles(".epoch .gauge .arc.inner");this.ctx.beginPath();this.ctx.arc(d,f,n-10,-1.125*Math.PI,0.125*Math.PI,!1);this.ctx.stroke();
return this.drawNeedle()}};c.prototype.drawNeedle=function(){var a,c,d;d=[this.centerX(),this.centerY(),this.radius()];a=d[0];c=d[1];d=d[2];this.setStyles(".epoch .gauge .needle");this.ctx.beginPath();this.ctx.save();this.ctx.translate(a,c);this.ctx.rotate(this.getAngle(this.value));this.ctx.moveTo(4*this.pixelRatio,0);this.ctx.lineTo(-4*this.pixelRatio,0);this.ctx.lineTo(-1*this.pixelRatio,19-d);this.ctx.lineTo(1,19-d);this.ctx.fill();this.setStyles(".epoch .gauge .needle-base");this.ctx.beginPath();
this.ctx.arc(0,0,this.getWidth()/25,0,2*Math.PI);this.ctx.fill();return this.ctx.restore()};return c}(Epoch.Chart.Canvas)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Time.Heatmap=function(d){function c(e){this.options=e;c.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,a));Epoch.isString(this.options.opacity)?(this._colorFn=f[this.options.opacity],null==this._colorFn&&Epoch.exception("Unknown coloring function provided '"+this.options.opacity+
"'")):Epoch.isFunction(this.options.opacity)?this._colorFn=this.options.opacity:Epoch.exception("Unknown type for provided coloring function.");this._setupPaintCanvas()}var f,a;k(c,d);a={buckets:10,bucketRange:[0,100],opacity:"linear",bucketPadding:2};f={root:function(a,c){return Math.pow(a/c,0.5)},linear:function(a,c){return a/c},quadratic:function(a,c){return Math.pow(a/c,2)},cubic:function(a,c){return Math.pow(a/c,3)},quartic:function(a,c){return Math.pow(a/c,4)},quintic:function(a,c){return Math.pow(a/
c,5)}};c.prototype.setData=function(a){var d,f,n,h;c.__super__.setData.call(this,a);n=this.data;h=[];d=0;for(f=n.length;d<f;d++)a=n[d],h.push(a.values=a.values.map(function(a){return function(c){return a._prepareEntry(c)}}(this)));return h};c.prototype._prepareEntry=function(a){var c,d,f,h,l,q,p,k,w,s;l={time:a.time,max:0,buckets:{}};f=this.options.bucketRange;h=f[0];f=f[1];q=(f-h)/this.options.buckets;d=c=0;for(k=this.options.buckets;0<=k?c<k:c>k;d=0<=k?++c:--c)l.buckets[h+q*(d+1)]=0;w=a.histogram;
for(p in w)for(a=w[p],d=k=0,s=this.options.buckets;0<=s?k<s:k>s;d=0<=s?++k:--k)if(c=h+q*(d+1),p<c||d===this.options.buckets-1){l.buckets[c]+=a;break}h=l.buckets;for(f in h)a=h[f],l.max=Math.max(l.max,a);return l};c.prototype.y=function(){return d3.scale.linear().domain(this.options.bucketRange).range([this.innerHeight(),0])};c.prototype.ySvg=function(){return d3.scale.linear().domain(this.options.bucketRange).range([this.innerHeight()/this.pixelRatio,0])};c.prototype.h=function(){return this.innerHeight()/
this.options.buckets};c.prototype._offsetX=function(){return 0.5*this.w()/this.pixelRatio};c.prototype._setupPaintCanvas=function(){this.paintWidth=(this.options.windowSize+1)*this.w();this.paintHeight=this.height*this.pixelRatio;this.paint=$("<canvas width='"+this.paintWidth+"' height='"+this.paintHeight+"'>").get(0);this.p=this.paint.getContext("2d");this.redraw();this.on("after:shift","_paintEntry");return this.on("transition:end","_shiftPaintCanvas")};c.prototype.redraw=function(){var a,c,d;c=
this.data[0].values.length;a=this.options.windowSize;for(d=[];0<=--c&&0<=--a;)d.push(this._paintEntry(c,a));return d};c.prototype._paintEntry=function(a,c){var d,f,h,k,l,p,t,w,s,B,A,z,x,y,C;null==a&&(a=null);null==c&&(c=null);f=[this.w(),this.h()];z=f[0];t=f[1];null==a&&(a=this.data[0].values.length-1);null==c&&(c=this.options.windowSize);l=[];f={};A=0;B=this.data;h=0;for(w=B.length;h<w;h++){s=B[h];p=s.values[a];x=p.buckets;for(d in x)k=x[d],null==f[d]&&(f[d]=0),f[d]+=k;A+=p.max;k=this.getStyles("."+
s.className.split(" ").join(".")+" rect.bucket");p.color=k.fill;l.push(p)}s=c*z;this.p.clearRect(s,0,z,this.paintHeight);w=this.options.buckets;C=[];for(d in f){k=f[d];h=this._avgLab(l,d);x=B=0;for(y=l.length;x<y;x++)p=l[x],B+=p.buckets[d]/k*A;0<k&&(this.p.fillStyle=Epoch.toRGBA(h,this._colorFn(k,B)),this.p.fillRect(s,(w-1)*t,z-this.options.bucketPadding,t-this.options.bucketPadding));C.push(w--)}return C};c.prototype._shiftPaintCanvas=function(){var a;a=this.p.getImageData(this.w(),0,this.paintWidth-
this.w(),this.paintHeight);return this.p.putImageData(a,0,0)};c.prototype._avgLab=function(a,c){var d,f,h,k,l,p,t,w;t=[0,0,0,0];l=t[0];d=t[1];f=t[2];t=t[3];p=0;for(w=a.length;p<w;p++)h=a[p],null!=h.buckets[c]&&(t+=h.buckets[c]);for(k in a)h=a[k],p=null!=h.buckets[c]?h.buckets[c]|0:0,p/=t,h=d3.lab(h.color),l+=p*h.l,d+=p*h.a,f+=p*h.b;return d3.lab(l,d,f).toString()};c.prototype.draw=function(a){null==a&&(a=0);if(this.isVisible())return this.clear(),this.ctx.drawImage(this.paint,a,0)};return c}(Epoch.Time.Plot)}).call(this);
(function(){var l={}.hasOwnProperty,k=function(d,c){function f(){this.constructor=d}for(var a in c)l.call(c,a)&&(d[a]=c[a]);f.prototype=c.prototype;d.prototype=new f;d.__super__=c.prototype;return d};Epoch.Time.Line=function(d){function c(){return c.__super__.constructor.apply(this,arguments)}k(c,d);c.prototype.setStyles=function(c){c=this.getStyles("g."+c.replace(/\s/g,".")+" path.line");this.ctx.fillStyle=c.fill;this.ctx.strokeStyle=c.stroke;return this.ctx.lineWidth=c["stroke-width"].replace("px",
"")};c.prototype.draw=function(c){var a,d,m,k,l,h,u,q,p,t,w;null==c&&(c=0);this.clear();d=[this.y(),this.w()];u=d[0];h=d[1];t=this.data;w=[];q=0;for(p=t.length;q<p;q++)if(k=t[q],0<k.values.length){this.setStyles(k.className);this.ctx.beginPath();l=[this.options.windowSize,k.values.length,this.inTransition()];d=l[0];m=l[1];for(l=l[2];-2<=--d&&0<=--m;)a=k.values[m],a=[(d+1)*h+c,u(a.y)],l&&(a[0]+=h),d===this.options.windowSize-1?this.ctx.moveTo.apply(this.ctx,a):this.ctx.lineTo.apply(this.ctx,a);w.push(this.ctx.stroke())}return w};
return c}(Epoch.Time.Plot)}).call(this);(function(){Epoch._typeMap={area:Epoch.Chart.Area,bar:Epoch.Chart.Bar,"bar-labeled":Epoch.Chart.LabeledBar,line:Epoch.Chart.Line,pie:Epoch.Chart.Pie,scatter:Epoch.Chart.Scatter,"time.area":Epoch.Time.Area,"time.bar":Epoch.Time.Bar,"time.line":Epoch.Time.Line,"time.gauge":Epoch.Time.Gauge,"time.heatmap":Epoch.Time.Heatmap}}).call(this);
(function(){jQuery.fn.epoch=function(l){var k;l.el=this;null==(k=this.data("epoch-chart"))&&(k=Epoch._typeMap[l.type],null==k&&Epoch.exception("Unknown chart type '"+l.type+"'"),this.data("epoch-chart",k=new k(l)),k.draw());return k}}).call(this);
